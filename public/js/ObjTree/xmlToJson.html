<meta charset=utf-8>
<meta name=description content="">
<meta name=viewport content="width=device-width, initial-scale=1">

<textarea placeholder="转换之后的XML或者JSON代码" id="input" style="width:100%;height:100%;">
<?xml version="1.0" encoding="UTF-8"?>
<TextureAtlas imagePath="SB05_icons.atf">
    <SubTexture name="SB05_bIcon-1" x="86" y="2" width="77" height="119" frameX="-27" frameY="-12" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-10" x="2" y="378" width="85" height="122" frameX="-25" frameY="-10" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-101" x="165" y="2" width="123" height="116" frameX="-4" frameY="-14" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-11" x="86" y="123" width="104" height="118" frameX="-13" frameY="-14" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-2" x="2" y="2" width="82" height="124" frameX="-24" frameY="-7" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-201" x="164" y="243" width="97" height="107" frameX="-16" frameY="-22" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-3" x="2" y="253" width="74" height="123" frameX="-29" frameY="-8" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-4" x="263" y="217" width="93" height="90" frameX="-19" frameY="-36" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-5" x="192" y="120" width="84" height="95" frameX="-23" frameY="-32" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-6" x="173" y="352" width="99" height="90" frameX="-14" frameY="-36" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-7" x="89" y="377" width="82" height="122" frameX="-27" frameY="-10" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-8" x="2" y="128" width="82" height="123" frameX="-27" frameY="-9" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-9" x="78" y="253" width="84" height="122" frameX="-27" frameY="-10" frameWidth="130" frameHeight="135"/>
    <SubTexture name="SB05_bIcon-blank" x="450" y="2" width="93" height="128" frameX="-23" frameY="-7" frameWidth="130" frameHeight="135"/>
</TextureAtlas>
</textarea>

<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="ObjTree.js"></script>
<script type="text/javascript">
    // 文本域xml转json;
    var val = $('#input').val();
    var json = xml_2_json(val);
    console.log( json );
    function xml_2_json(val, isTrue) {
        var space = true ? "  " : "";
        var xotree = new XML.ObjTree();
        var inputdata = $.trim(val);
        var tree = xotree.parseXML(inputdata);
        if (!tree.html) {
            if( !!isTrue ){
                return tree;
            }else{
                return JSON.stringify(tree, null, space);
            }
            // $('#output').val(JSON.stringify(tree, null, space));
            // alert('green', 'XML转JSON成功');
        } else {
            alert('red', 'XML格式错误');
        }
    }

</script>
